{% extends "form_layout.html" %}

{% from "_form_helpers.html" import input_field, select_field, radio_field, checkbox_field, label_only %}

{% block head %}
{{super()}}
{% include "anytime_head.html"%}

{% endblock head%}

{% block fieldset %}
<fieldset>
    <p>{{ input_field(rec.id,"id",id="id",type="hidden",default=0)}}</p>
    <div class="w3-row">
        <p class='w3-col w3-half'>{{ input_field(rec.first_name,"first_name",req=True,)}}</p>
        <p class='w3-col w3-half'>{{ input_field(rec.last_name,"last_name",req=True,)}}</p>
    </div>
    <div class="w3-row">
        <p class='w3-col w3-half' >{{ input_field(rec.email,"email",req=True)}}</p>
        <p class='w3-col w3-half' >{{ input_field(rec.phone,'phone',)}}</p>
    </div>
    <div class="w3-row">
        <div class="w3-col w3-third">
            {% set reservation_date = '' %}
            {% if rec.reservation_date %}{% set reservation_date = rec.reservation_date | local_date_and_time_string %}{% endif %}
            
            <p>{{ input_field(reservation_date,"reservation_date",class="DatePickerButton",id="reservation_date",label="Reservation Date",req=True)}}</p>
        </div>
    </div>
    {% if bike %}
    <h4 class="bike-info-head">Bike Reserved</h4>
    <p>Bike ID: <strong>{{ bike.id }}</strong></p>
        {% include "bike_data_block.html" %}
        
    <div class="w3-row">
        <h4 class="bike-info-head" >Make a Match</h4>
        {% if rec.donation_amount %}{% set donation_amount = money(rec.donation_amount)%}{% else %}{% set donation_amount = ''%}{% endif %}
        <p class='w3-col w3-half' >{{ input_field(donation_amount,"donation_amount",placeholder="0.00")}}</p>
        <p class="form_button_row w3-contain w3-panel" >
        	<a class="w3-btn w3-ripple w3-save-button-color w3-mobile w3-round-large w3-shadow" onclick="alert('Eventually this will create a match record!');" >Match Bike</a>
        </p> 
    </div>
    {% else %}
    <div class="w3-row">
        <p class='w3-col w3-half' >{{ input_field(rec.bike_id,"bike_id",req=True,)}}</p>
    </div>
   {% endif %}
 
    
 </fieldset>
 
 <script>
    
     var date_format = "%c/%e/%y %l:%i%p"; // "3/4/19 06:00AM"
     var pickers = ["#reservation_date"]
     for( i = 0;i<pickers.length;i++){
         /* 
             you must remove the pickers before dismissing the dialog
             else they will not be reattached the next time the dialog opens
         */
         $(pickers[i]).AnyTime_noPicker().AnyTime_picker({ format: date_format } );                
     }
     
 </script>
{% endblock fieldset %}
